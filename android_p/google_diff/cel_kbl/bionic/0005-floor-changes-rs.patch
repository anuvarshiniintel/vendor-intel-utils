From 783458d69ecafa0844438780739ccfef23a738c5 Mon Sep 17 00:00:00 2001
From: anuvarsh <anuvarshini.bc@intel.com>
Date: Wed, 28 Aug 2019 14:41:54 +0530
Subject: [PATCH] floor changes rs

Tracked-On:
Signed-off-by: anuvarsh <anuvarshini.bc@intel.com>
---
 libm/Android.bp                        |  7 +++++--
 libm/x86_64/svml_d_floor4_core_l9la.S  | 22 ++++++++++++++++++++++
 libm/x86_64/svml_s_floorf4_core_l9la.S | 22 ++++++++++++++++++++++
 3 files changed, 49 insertions(+), 2 deletions(-)
 create mode 100644 libm/x86_64/svml_d_floor4_core_l9la.S
 create mode 100644 libm/x86_64/svml_s_floorf4_core_l9la.S

diff --git a/libm/Android.bp b/libm/Android.bp
index 013316d78..d346aa11d 100644
--- a/libm/Android.bp
+++ b/libm/Android.bp
@@ -546,8 +546,8 @@ cc_library {
                 srcs: [
                     "x86_64/avx2_s_ceil.S",
                     "x86_64/avx2_s_ceilf.S",
-                    "x86_64/avx2_s_floor.S",
-                    "x86_64/avx2_s_floorf.S",
+                    "x86_64/svml_d_floor4_core_l9la.S",
+                    "x86_64/svml_s_floorf4_core_l9la.S",
 		    "x86_64/avx2_e_acos.S",
 	            "x86_64/avx2_e_asin.S",
                     "x86_64/avx2_s_cos.S",
@@ -555,6 +555,7 @@ cc_library {
                     "x86_64/avx2-s_rintf.S",
                     "x86_64/avx2-s_trunc.S",
                     "x86_64/avx2-s_truncf.S",
+			
 
                 ],
 		exclude_srcs: [
@@ -580,6 +581,8 @@ cc_library {
                     "x86_64/rintf.S",
                     "x86_64/trunc.S",
                     "x86_64/truncf.S",
+		    "x86_64/avx2_s_floor.S",
+		    "x86_64/avx2_s_floorf.S",	
                 ],
 	     },
 		
diff --git a/libm/x86_64/svml_d_floor4_core_l9la.S b/libm/x86_64/svml_d_floor4_core_l9la.S
new file mode 100644
index 000000000..0f6713d79
--- /dev/null
+++ b/libm/x86_64/svml_d_floor4_core_l9la.S
@@ -0,0 +1,22 @@
+/* ==============================================================================
+ * INTEL CONFIDENTIAL
+ * Copyright 2019 Intel Corporation.
+ *
+ * This software and the related documents are Intel copyrighted  materials,  and
+ * your use of  them is  governed by the  express license  under which  they were
+ * provided to you (License).  Unless the License provides otherwise, you may not
+ * use, modify, copy, publish, distribute,  disclose or transmit this software or
+ * the related documents without Intel's prior written permission.
+ *
+ * This software and the related documents  are provided as  is,  with no express
+ * or implied  warranties,  other  than those  that are  expressly stated  in the
+ * License.
+ * ==============================================================================
+ */
+
+#include <private/bionic_asm.h>
+
+ENTRY(floor)
+vroundpd  $1, %ymm0, %ymm0
+ret
+END(floor)
diff --git a/libm/x86_64/svml_s_floorf4_core_l9la.S b/libm/x86_64/svml_s_floorf4_core_l9la.S
new file mode 100644
index 000000000..63392ed68
--- /dev/null
+++ b/libm/x86_64/svml_s_floorf4_core_l9la.S
@@ -0,0 +1,22 @@
+/* ==============================================================================
+ * INTEL CONFIDENTIAL
+ * Copyright 2019 Intel Corporation.
+ *
+ * This software and the related documents are Intel copyrighted  materials,  and
+ * your use of  them is  governed by the  express license  under which  they were
+ * provided to you (License).  Unless the License provides otherwise, you may not
+ * use, modify, copy, publish, distribute,  disclose or transmit this software or
+ * the related documents without Intel's prior written permission.
+ *
+ * This software and the related documents  are provided as  is,  with no express
+ * or implied  warranties,  other  than those  that are  expressly stated  in the
+ * License.
+ * ==============================================================================
+ */
+
+#include <private/bionic_asm.h>
+
+ENTRY(floorf)
+vroundps  $1, %xmm0, %xmm0
+ret
+END(floorf)
\ No newline at end of file
-- 
2.23.0

