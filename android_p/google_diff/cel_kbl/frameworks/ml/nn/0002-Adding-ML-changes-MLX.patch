From ddd16de051a9ec2bdd5dcf40a5511d6fc967e078 Mon Sep 17 00:00:00 2001
From: anuvarsh <anuvarshini.bc@intel.com>
Date: Wed, 29 May 2019 14:01:40 +0530
Subject: [PATCH] Adding ML changes MLX

Change-Id: Ic5fe285f7cf976aa8c0be1d1d3fe96d5339b39b1
Tracked-On: None
Signed-off-by: anuvarsh <anuvarshini.bc@intel.com>
---
 nn/Android.bp | 14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)

diff --git a/nn/Android.bp b/nn/Android.bp
index 1b04d7d8..a7a5ad1e 100644
--- a/nn/Android.bp
+++ b/nn/Android.bp
@@ -21,8 +21,20 @@ cc_defaults {
         "-Wextra",
         "-Werror",
         "-O3",
-	"-march=haswell",
     ],
+
+    arch: {
+        x86: {
+           avx2: {
+                  cflags: ["-mavx","-mavx2","-mfma"],
+                 },
+           },
+        x86_64: {
+           avx2: {
+                  cflags: ["-mavx","-mavx2","-mfma"],
+                 },
+           },
+    },
     product_variables: {
         debuggable: {  // eng and userdebug builds
             cflags: ["-DNN_DEBUGGABLE"],
-- 
2.21.0

